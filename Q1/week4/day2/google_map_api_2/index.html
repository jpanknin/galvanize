<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Google Maps API</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1>Google Maps</h1>
    <form>
      <input id="lat" type="text" name="latitude" placeholder="Latitude">
      <input id="lng" type="text" name="longitude" placeholder="Longitude">
      <input type="submit" value="Submit">
    </form>

    <div id="mapGoesHere">

    </div>

    <script>
      function initMap() {
        var marker;

        document.querySelector('form').addEventListener('submit', function(event) {
          event.preventDefault();
          console.log("Market outside of if statement");
          if (marker) {
            console.log("Marker before null set: " + Object.keys(marker));
            marker.setMap(null);
            console.log("Marker after null set: " + Object.keys(marker));

          }
          var lat = parseFloat(document.querySelector('#lat').value);
          var lng = parseFloat(document.querySelector('#lng').value);

          var marker = new google.maps.Marker({
            position: {lat: lat, lng: lng},
            map: map
          })
        })
        var map = new google.maps.Map(document.querySelector('#mapGoesHere'), {
        zoom: 14,
        center: {lat: 40.726388, lng: -74.007792}
      })
    }
    </script>

    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyABI8oXxo4OLtgLj-PenZaDkwmeDHqj5iE&callback=initMap">
    </script>

  </body>
</html>
